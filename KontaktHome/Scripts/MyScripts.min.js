function cmbSelectVistorChange(){$("#chkboxSetVisitor").is(":checked")?$("#containerVisitor").show():$("#containerVisitor").hide()}function cmbSelectDesignerChange(){$("#chkboxSetDesigner").is(":checked")?$("#containerDesigner").show():$("#containerDesigner").hide()}function getActiveOrdersWithParametr(){var t=!0,e=new Date($("#firstDate").val().trim()),a=new Date($("#lastDate").val().trim()),r=document.getElementById("chkClosedOrders").checked,i=document.getElementById("chkActiveOrders").checked;if(e>a?(t=!1,Swal.fire("Başlanğıc tarixi bitiş tarixindən böyük olabilməz!","","error")):""==$("#firstDate").val().trim()&""==$("#lastDate").val().trim()&&(t=!1,Swal.fire("Tarixlər boş olabilməz!","","error")),0==r&&0==i&&(t=!1,Swal.fire("Mütləq bir sifariş statusu seçilməlidir!","","error")),1==t){var n={firstDate:$("#firstDate").val().trim(),lastDate:$("#lastDate").val().trim(),deletedOrders:r,activeOrders:i,sellerCode:document.getElementById("saticilar").value,storeCode:document.getElementById("magazalar").value};$("#tableActiveOrders").DataTable({destroy:!0,ajax:{url:"../Order/GetActiveOrdersWithParametr",type:"POST",data:n,dataSrc:""},columns:[{data:"0"},{data:"1"},{data:"2"},{data:"3"},{data:"4"},{data:"5"},{data:"6"},{data:"7"},{data:"8"},{data:null,render:function(t,e,a){return"Aktiv"==a[8]?'<a href="/Order/OrderInfo'+a[7]+'" class="btn btn-primary btn-sm mt-1 mb-1"><i class="fas fa-search"></i> Ətraflı</a> <a href="/Order/EditOrder'+a[7]+'" class="btn btn-info btn-sm mt-1 mb-1"><i class="fas fa-pencil-alt"></i> Düzəliş Et</a> <a href="/Order/CloseOrder'+a[7]+'" class="btn btn-danger btn-sm  mt-1 mb-1"><i class="far fa-trash-alt"></i> İmtina</a> <a href="/Order/VisitInfo'+a[7]+'" class="btn btn-warning btn-sm mt-1 mb-1"><i class="fas fa-search"></i> Vizit Məlumatları</a>':'<a href="/Order/OrderInfo'+a[7]+'" class="btn btn-primary btn-sm mt-1 mb-1"><i class="fas fa-search"></i> Ətraflı</a><a href="/Order/VisitInfo'+a[7]+'" class="btn btn-warning btn-sm mt-1 mb-1"><i class="fas fa-search"></i> Vizit Məlumatları</a>'}}],language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Azerbaijan.json"},columnDefs:[{targets:[9],searchable:!1},{targets:[7],visible:!1}],buttons:[{extend:"print",text:"Print",title:"Aktiv Sifarişlər",customize:function(t){$(t.document.body).css("font-size","12pt"),$(t.document.body).find("table").addClass("compact").css("font-size","inherit"),$(t.document.body).find("h1").css("text-align","center")}}]})}}function getVisitorActiveOrdersWithParametr(){var t=!0,e=new Date($("#visitfirstDate").val().trim()),a=new Date($("#visitlastDate").val().trim()),r=document.getElementById("chkVisitActiveOrders").checked,i=document.getElementById("chkVisitClosedOrders").checked;if(e>a?(t=!1,Swal.fire("Başlanğıc tarixi bitiş tarixindən böyük olabilməz!","","error")):""==$("#visitfirstDate").val().trim()&""==$("#visitlastDate").val().trim()&&(t=!1,Swal.fire("Tarixlər boş olabilməz!","","error")),0==r&&0==i&&(t=!1,Swal.fire("Mütləq bir sifariş statusu seçilməlidir!","","error")),1==t){var n={firstDate:$("#visitfirstDate").val().trim(),lastDate:$("#visitlastDate").val().trim(),activeOrders:r,deletedOrders:i};$("#tableVisitorOrders").DataTable({destroy:!0,ajax:{url:"../Order/GetVisitorActiveOrdersWithParametr",type:"POST",data:n,dataSrc:""},columns:[{data:"0"},{data:"1"},{data:"2"},{data:"3"},{data:"4"},{data:"5"},{data:"6"},{data:"7"},{data:null,render:function(t,e,a){return a[7]>=2&&a[7]<4?'<a href="/Order/VisitInfo'+a[6]+'" class="btn btn-info btn-sm mt-1 mb-1"><i class="fas fa-pencil-alt"></i> Ətraflı</a> <a href="/Order/CustomerVisit'+a[6]+'" class="btn btn-success btn-sm  mt-1 mb-1"><i class="fas fa-user"></i> Vizit Başla</a> ':1==a[7]?'<a href="/Order/VisitInfo'+a[6]+'" class="btn btn-info btn-sm mt-1 mb-1"><i class="fas fa-pencil-alt"></i> Ətraflı</a> <a href="/Order/AcceptOrder'+a[6]+'" class="btn btn-primary btn-sm  mt-1 mb-1"><i class="fas fa-check"></i> Qəbul Et</a> ':4==a[7]?'<a href="/Order/VisitInfo'+a[6]+'" class="btn btn-info btn-sm mt-1 mb-1"><i class="fas fa-pencil-alt"></i> Ətraflı</a>':void 0}}],language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Azerbaijan.json"},columnDefs:[{targets:[8],searchable:!1},{targets:[7,6],visible:!1}]})}}function getDesignerActiveOrdersWithParametr(){var t=!0,e=new Date($("#designfirstDate").val().trim()),a=new Date($("#designlastDate").val().trim()),r=document.getElementById("chkDesignActiveOrders").checked,i=document.getElementById("chkDesignClosedOrders").checked;if(e>a?(t=!1,Swal.fire("Başlanğıc tarixi bitiş tarixindən böyük olabilməz!","","error")):""==$("#designfirstDate").val().trim()&""==$("#designlastDate").val().trim()&&(t=!1,Swal.fire("Tarixlər boş olabilməz!","","error")),0==r&&0==i&&(t=!1,Swal.fire("Mütləq bir sifariş statusu seçilməlidir!","","error")),1==t){var n={firstDate:$("#designfirstDate").val().trim(),lastDate:$("#designlastDate").val().trim(),activeOrders:r,deletedOrders:i};$("#tableDesignerOrders").DataTable({destroy:!0,ajax:{url:"../Order/GetDesignerActiveOrdersWithParametr",type:"POST",data:n,dataSrc:""},columns:[{data:"0"},{data:"1"},{data:"2"},{data:"3"},{data:"4"},{data:"5"},{data:"6"},{data:"7"},{data:null,render:function(t,e,a){return 1==a[7]?'<a href="/Order/VisitInfo'+a[6]+'" class="btn btn-info btn-sm mt-1 mb-1"><i class="fas fa-pencil-alt"></i> Ətraflı</a> <a href="/Order/AcceptDesignerOrder'+a[6]+'" class="btn btn-primary btn-sm  mt-1 mb-1"><i class="fas fa-check"></i> Qəbul Et</a>':a[7]>=2&&a[7]<4?'<a href="/Order/VisitInfo'+a[6]+'" class="btn btn-info btn-sm mt-1 mb-1"><i class="fas fa-pencil-alt"></i> Ətraflı</a> <a href="/Order/DesignerEdit'+a[6]+'" class="btn btn-success btn-sm  mt-1 mb-1"><i class="fas fa-user"></i> Dizayn Et</a>':4==a[7]?'<a href="/Order/VisitInfo'+a[6]+'" class="btn btn-info btn-sm mt-1 mb-1"><i class="fas fa-pencil-alt"></i> Ətraflı</a>':void 0}}],language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Azerbaijan.json"},columnDefs:[{targets:[8],searchable:!1},{targets:[7,6],visible:!1}]})}}$("#sandbox-container input").datepicker({language:"az",todayBtn:"linked",clearBtn:!0,todayHighlight:!0,autoclose:!0}),jQuery.fn.inputFilter=function(t){return this.on("input keydown keyup mousedown mouseup select contextmenu drop",function(){t(this.value)?(this.oldValue=this.value,this.oldSelectionStart=this.selectionStart,this.oldSelectionEnd=this.selectionEnd):this.hasOwnProperty("oldValue")?(this.value=this.oldValue,this.setSelectionRange(this.oldSelectionStart,this.oldSelectionEnd)):this.value=""})},$("#itemCount").inputFilter(function(t){return/^\d*$/.test(t)}),$("#userEditdate").inputFilter(function(t){return/^\d*$/.test(t)}),$("#dimensionWide").inputFilter(function(t){return/^-?\d*[.]?\d*$/.test(t)}),$("#dimensionLemght").inputFilter(function(t){return/^-?\d*[.]?\d*$/.test(t)}),$("#dimensionHeight").inputFilter(function(t){return/^-?\d*[.]?\d*$/.test(t)}),$("#orderPrice").inputFilter(function(t){return/^-?\d*[.]?\d*$/.test(t)}),$("#orderFinalPrice").inputFilter(function(t){return/^-?\d*[.]?\d*$/.test(t)}),$(document).ready(function(){$("body").on("click","#btnOrderEdit",function(){var t=$(this).closest("tr").children("td:eq(2)").text();window.location.href="../Order/EditOrder?Sira="+t}),$("body").on("click","#btnAddVisitor",function(){var t=$(this).closest("tr").children("td:eq(2)").text();window.location.href="../Order/EditOrder?Sira="+t}),$("body").on("click","#btnOrderDeactivate",function(){var t=$(this).closest("tr").children("td:eq(2)").text();window.location.href="../Order/EditOrder?Sira="+t}),$("body").on("click","#btnOrderInfo",function(){var t=$(this).closest("tr").children("td:eq(2)").text();window.location.href="../Order/OrderInfo?Sira="+t}),$("body").on("click","#btnStartVisit",function(){var t=$(this).closest("tr").children("td:eq(2)").text();window.location.href="../Order/CustomerVisit?Sira="+t}),$("body").on("click","#btnAcceptOrder",function(){var t=$(this).closest("tr").children("td:eq(2)").text();window.location.href="../Order/AcceptOrder?Sira="+t+"&Status=1"}),$("body").on("click","#btnAcceptDesigner",function(){var t=$(this).closest("tr").children("td:eq(2)").text();window.location.href="../Order/AcceptOrder?Sira="+t+"&Status=2"}),$("body").on("click","#btnStartDesign",function(){var t=$(this).closest("tr").children("td:eq(2)").text();window.location.href="../Order/DesignerEdit?Sira="+t}),$("body").on("click","#btnUserInfo",function(){var t=$(this).closest("tr").children("td:eq(1)").text();window.location.href="../Admin/EditUser?userid="+t}),$("#DomainUser").change(function(){var t=$("#DomainUser option:selected").attr("value"),e=$("#DomainUser option:selected").text();$("#userUserName").val(t),$("#userUserDisplayName").val(e)}),$("#userStoreCode").change(function(){$("#userStoreCode option:selected").attr("value");var t=$("#userStoreCode option:selected").text();$("#userStoreName").val(t)}),cmbSelectVistorChange(),cmbSelectDesignerChange()}),$("#tableUsers").DataTable({destroy:!0,ajax:{url:"../Admin/GetUsers",type:"POST",data:data,dataSrc:""},columns:[{data:"0"},{data:"1"},{data:"2"},{data:"3"},{data:"4"},{data:"5"},{data:"6"},{data:null,render:function(t,e,a){return'<a href="/Admin/EditUser?userid='+a[1]+'" class="btn btn-info btn-sm mt-1 mb-1"><i class="fas fa-search"></i> Ətraflı</a> <a href="/Admin/DeleteUser?userid='+a[1]+'" class="btn btn-danger btn-sm  mt-1 mb-1"><i class="far fa-trash-alt"></i> Sil</a>  <a href="/Admin/UserRoles?UserID='+a[1]+'" class="btn btn-warning btn-sm  mt-1 mb-1"><i class="fas fa-user-shield"></i> Səlahiyyətlər</a>'}}],language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Azerbaijan.json"},columnDefs:[{targets:[7],searchable:!1}],dom:"Bfrtip",buttons:[{extend:"print",text:"Print",title:"istifadəçilər",customize:function(t){$(t.document.body).css("font-size","12pt"),$(t.document.body).find("table").addClass("compact").css("font-size","inherit"),$(t.document.body).find("h1").css("text-align","center")}}]}),$("#tableDesignerOrders").DataTable({destroy:!0,ajax:{url:"../Order/GetDesignerActiveOrders",type:"POST",data:data,dataSrc:""},columns:[{data:"0"},{data:"1"},{data:"2"},{data:"3"},{data:"4"},{data:"5"},{data:"6"},{data:"7"},{data:null,render:function(t,e,a){return 1==a[7]?'<a href="/Order/VisitInfo'+a[6]+'" class="btn btn-info btn-sm mt-1 mb-1"><i class="fas fa-pencil-alt"></i> Ətraflı</a> <a href="/Order/AcceptDesignerOrder'+a[6]+'" class="btn btn-primary btn-sm  mt-1 mb-1"><i class="fas fa-check"></i> Qəbul Et</a>':a[7]>=2&&a[7]<4?'<a href="/Order/VisitInfo'+a[6]+'" class="btn btn-info btn-sm mt-1 mb-1"><i class="fas fa-pencil-alt"></i> Ətraflı</a> <a href="/Order/DesignerEdit'+a[6]+'" class="btn btn-success btn-sm  mt-1 mb-1"><i class="fas fa-user"></i> Dizayn Et</a>':4==a[7]?'<a href="/Order/VisitInfo'+a[6]+'" class="btn btn-info btn-sm mt-1 mb-1"><i class="fas fa-pencil-alt"></i> Ətraflı</a>':void 0}}],language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Azerbaijan.json"},columnDefs:[{targets:[8],searchable:!1},{targets:[7,6],visible:!1}]});var data={};function getToday(){var t=new Date,e=t.getDate(),a=t.getMonth()+1,r=t.getFullYear();return e<10&&(e="0"+e),a<10&&(a="0"+a),t=a+"/"+e+"/"+r}$("#tableActiveOrders").DataTable({destroy:!0,ajax:{url:"../Order/GetActiveOrders",type:"POST",data:data,dataSrc:""},columns:[{data:"0"},{data:"1"},{data:"2"},{data:"3"},{data:"4"},{data:"5"},{data:"6"},{data:"7"},{data:"8"},{data:null,render:function(t,e,a){return"Aktiv"==a[8]?'<a href="/Order/OrderInfo'+a[7]+'" class="btn btn-primary btn-sm mt-1 mb-1"><i class="fas fa-search"></i> Ətraflı</a> <a href="/Order/EditOrder'+a[7]+'" class="btn btn-info btn-sm mt-1 mb-1"><i class="fas fa-pencil-alt"></i> Düzəliş Et</a> <a href="/Order/CloseOrder'+a[7]+'" class="btn btn-danger btn-sm  mt-1 mb-1"><i class="far fa-trash-alt"></i> İmtina</a> <a href="/Order/VisitInfo'+a[7]+'" class="btn btn-warning btn-sm mt-1 mb-1"><i class="fas fa-search"></i> Vizit Məlumatları</a>':'<a href="/Order/OrderInfo'+a[7]+'" class="btn btn-primary btn-sm mt-1 mb-1"><i class="fas fa-search"></i> Ətraflı</a> <a href="/Order/EditOrder'+a[7]+'" class="btn btn-info btn-sm mt-1 mb-1"><i class="fas fa-pencil-alt"></i> Düzəliş Et</a> <a href="/Order/VisitInfo'+a[7]+'" class="btn btn-warning btn-sm mt-1 mb-1"><i class="fas fa-search"></i> Vizit Məlumatları</a>'}}],language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Azerbaijan.json"},columnDefs:[{targets:[9],searchable:!1},{targets:[7],visible:!1}],buttons:[{extend:"print",text:"Print",title:"Aktiv Sifarişlər",customize:function(t){$(t.document.body).css("font-size","12pt"),$(t.document.body).find("table").addClass("compact").css("font-size","inherit"),$(t.document.body).find("h1").css("text-align","center")}}]}),$("#tableVisitorOrders").DataTable({destroy:!0,ajax:{url:"../Order/GetVisitorActiveOrders",type:"POST",data:data,dataSrc:""},columns:[{data:"0"},{data:"1"},{data:"2"},{data:"3"},{data:"4"},{data:"5"},{data:"6"},{data:"7"},{data:null,render:function(t,e,a){return a[7]>=2&&a[7]<4?'<a href="/Order/VisitInfo'+a[6]+'" class="btn btn-info btn-sm mt-1 mb-1"><i class="fas fa-pencil-alt"></i> Ətraflı</a> <a href="/Order/CustomerVisit'+a[6]+'" class="btn btn-success btn-sm  mt-1 mb-1"><i class="fas fa-user"></i> Vizit Başla</a> ':1==a[7]?'<a href="/Order/VisitInfo'+a[6]+'" class="btn btn-info btn-sm mt-1 mb-1"><i class="fas fa-pencil-alt"></i> Ətraflı</a> <a href="/Order/AcceptOrder'+a[6]+'" class="btn btn-primary btn-sm  mt-1 mb-1"><i class="fas fa-check"></i> Qəbul Et</a> ':4==a[7]?'<a href="/Order/VisitInfo'+a[6]+'" class="btn btn-info btn-sm mt-1 mb-1"><i class="fas fa-pencil-alt"></i> Ətraflı</a>':void 0}}],language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Azerbaijan.json"},columnDefs:[{targets:[8],searchable:!1},{targets:[7,6],visible:!1}]});var userroleid=$("#roleUSERID").val();function fancyConfirm(t,e,a){"Aktiv"==a?$.fancyConfirm({title:e+" kodlu mağaza deaktiv ediləcək!",message:"Davam etmək istəyirisinizmi?",okButton:"Bəli",noButton:"Xeyr",callback:function(e){if(e){var a="/Admin/DeaktivateStore?storeid="+t;window.location=a}}}):$.fancyConfirm({title:e+" kodlu mağaza aktiv ediləcək!",message:"Davam etmək istəyirisinizmi?",okButton:"Bəli",noButton:"Xeyr",callback:function(e){if(e){var a="/Admin/ActivateStore?storeid="+t;window.location=a}}})}function LoadProducts(){$("#tableProducts").DataTable({destroy:"true",ajax:{url:"../Order/GetProducts",cache:"false",type:"POST",datatype:"json"},columns:[{data:"product_code"},{data:"product_name"},{data:"product_price"},{data:"product_quantity"},{render:function(t,e,a,r){return'<button type="button" class="btn btn-primary btn-sm" onclick="addfaqs(\''+a.product_code+"','"+a.product_name+"','"+a.product_price+"')\">Əlavə Et</i></button>"}}],language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Azerbaijan.json"}})}function calculateProduct(t){var e=$(t).closest("tr"),a=e.find('td:eq(2) input[type="text"]').val(),r=e.find('td:eq(3) input[type="text"]').val(),i=parseFloat(a)*parseFloat(r);e.find("td:eq(4)").html(i.toFixed(2)),calculateTotal()}function calculateTotal(){var t=0;let e=document.querySelector("#faqs tbody");if(e.rows.length>0)for(let a of e.rows)t+=parseFloat(a.cells[4].innerText);var a=t+t*document.getElementById("chargeValue").value/100;$("#productTotal").html(t.toFixed(2)),$("#productSum").html(a.toFixed(2))}$("#tableRoles").DataTable({destroy:!0,ajax:{url:"../Admin/GetUserRoles",type:"POST",data:{userid:userroleid},dataSrc:""},columns:[{data:"0"},{data:"1"},{data:"2"},{data:"3"},{data:"4"},{data:null,render:function(t,e,a){return'<button type="submit" value="'+a[3]+'" name="roleMappingID" class="btn btn-danger btn-sm  mt-1 mb-1"><i class="far fa-trash-alt"></i> Sil</button >'}}],language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Azerbaijan.json"},columnDefs:[{targets:[5],searchable:!1},{targets:[3],visible:!1}]}),$("#tableStores").DataTable({destroy:!0,ajax:{url:"../Admin/GetStores",type:"POST",data:data,dataSrc:""},columns:[{data:"0"},{data:"1"},{data:"2"},{data:"3"},{data:null,render:function(t,e,a){return"Aktiv"==a[3]?`<button type="button" onclick="fancyConfirm('${a[0]}','${a[1]} ','${a[3]}');" class="btn btn-danger btn-sm  mt-1 mb-1"><i class="far fa-trash-alt"></i> Deaktiv Et</button>`:`<button type="button" onclick="fancyConfirm('${a[0]}','${a[1]} ','${a[3]}');" class="btn btn-primary btn-sm  mt-1 mb-1"><i class="far fa-trash-alt"></i> Aktiv Et</button>`}}],language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Azerbaijan.json"},columnDefs:[{targets:[3],searchable:!1},{targets:[0],visible:!1}]}),$.fancyConfirm=function(t){t=$.extend(!0,{title:"Are you sure?",message:"",okButton:"OK",noButton:"Cancel",callback:$.noop},t||{}),$.fancybox.open({type:"html",src:'<div class="fc-content"><h4>'+t.title+"</h4><p>"+t.message+'</p><p class="float-right"><button data-value="0" data-fancybox-close class="btn btn-danger mr-3">'+t.noButton+'</button><button data-value="1" data-fancybox-close class="btn btn-primary">'+t.okButton+"</button></p></div>",opts:{animationDuration:350,animationEffect:"material",modal:!0,baseTpl:'<div class="fancybox-container fc-container" role="dialog" tabindex="-1"><div class="fancybox-bg"></div><div class="fancybox-inner"><div class="fancybox-stage"></div></div></div>',afterClose:function(e,a,r){var i=r?r.target||r.currentTarget:null,n=i?$(i).data("value"):0;t.callback(n)}}})};var deletedItems=[];function removeproduct(t){var e=$(t).closest("tr"),a=e.index(),r=document.getElementById("tableProd").rows[a].cells[5].innerHTML;0==r?e.remove():(deletedItems.push(r),e.remove()),calculateTotal()}function acceptOrder(t,e){var a=$("#__AjaxAntiForgeryForm"),r=$('input[name="__RequestVerificationToken"]',a).val();$("#saveModal").modal("show"),$.ajax({url:"/Order/SaveToMikro",type:"POST",data:{__RequestVerificationToken:r,orderid:t,visitid:e},success:function(t){if(1==t.status)$("#saveModal").modal("hide"),Swal.fire("Qeyd Tamamlandı","","success"),window.location.href=t.Url+t.link;else{$("#saveModal").modal("hide");for(var e="",a=0;a<t.errors.length;a++)e+=t.errors[a]+"<br>";$("#errors").replaceWith('<div id="errors" class="alert alert-danger col-md-12" role="alert">'+e+"</div>"),Swal.fire("Xəta başverdi",""+e,"error"),this.disabled=!1}},error:function(){$("#saveModal").modal("hide"),alert("Error. Please try again.")}})}function finishOrder(t){var e=$("#__AjaxAntiForgeryForm"),a=$('input[name="__RequestVerificationToken"]',e).val();$("#saveModal").modal("show"),$.ajax({url:"/Order/FinishOrder",type:"POST",data:{__RequestVerificationToken:a,orderid:t},success:function(t){if(1==t.status)$("#saveModal").modal("hide"),Swal.fire("Siafriş Tamamlandı","","success"),window.location.href=t.Url;else{$("#saveModal").modal("hide");for(var e="",a=0;a<t.errors.length;a++)e+=t.errors[a]+"<br>";$("#errors").replaceWith('<div id="errors" class="alert alert-danger col-md-12" role="alert">'+e+"</div>"),Swal.fire("Xəta başverdi",""+e,"error"),this.disabled=!1}},error:function(){$("#saveModal").modal("hide"),alert("Error. Please try again.")}})}function activateOrder(t){Swal.fire({title:"Sifariş aktiv ediləcək",text:"Davam etmək istəyirsinizmi?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Ləğv Et",confirmButtonText:"Davam Et"}).then(e=>{if(e.value){var a=$("#__AjaxAntiForgeryForm"),r=$('input[name="__RequestVerificationToken"]',a).val();$.ajax({url:"/Order/ActivateOrder",type:"POST",data:{__RequestVerificationToken:r,orderid:t},success:function(t){if(1==t.status)Swal.fire("Siafriş Aktiv Edildi","","success"),window.location.href=t.Url;else{for(var e="",a=0;a<t.errors.length;a++)e+=t.errors[a]+"<br>";$("#errors").replaceWith('<div id="errors" class="alert alert-danger col-md-12" role="alert">'+e+"</div>"),Swal.fire("Xəta başverdi",""+e,"error"),this.disabled=!1}},error:function(){alert("Error. Please try again.")}})}})}function deleteCharge(t){Swal.fire({title:"Qeyd silinəcək?",text:"Davam etmək istəyirsinizmi?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Davam Et",cancelButtonText:"Ləğv Et"}).then(e=>{if(e.value){var a=$("#__AjaxAntiForgeryForm"),r=$('input[name="__RequestVerificationToken"]',a).val();$.ajax({url:"/Admin/DeleteCharge",type:"POST",data:{__RequestVerificationToken:r,id:t},success:function(t){if(1==t.status)window.location.href=t.Url;else{for(var e="",a=0;a<t.errors.length;a++)e+=t.errors[a]+"<br>";Swal.fire("Xəta başverdi",""+e,"error"),this.disabled=!1}},error:function(){alert("Error. Please try again.")}})}})}$("#productCharge").change(function(){var t=$("#productCharge option:selected").attr("value");""==t&&(t=0),$("#chargeValue").val(t),calculateTotal()}),$("#recipeSave").click(function(){var t=[],e=!0;let a=document.querySelector("#faqs tbody");if(0==a.rows.length?($("#recipeitemAlert").replaceWith('<div id="recipeitemAlert" class="alert alert-danger col-md-12" role="alert">Stok seçilməyib.</div>'),e=!1):($("#recipeitemAlert").replaceWith('<div id="recipeitemAlert"></div>'),e=!0),1==e){for(let e of a.rows)t.push({ProductCode:e.cells[0].innerText,ProductName:e.cells[1].innerText,ProductPrice:e.cells[2].children[0].value,ProductQuantity:e.cells[3].children[0].value,ProductTotal:e.cells[4].innerText,ProductCharges:document.getElementById("chargeValue").value,Id:e.cells[5].innerText,OrderId:document.getElementById("orderNo").innerText,VisitId:document.getElementById("visitNo").innerText});if(t.length>0){var r=$("#__AjaxAntiForgeryForm"),i=$('input[name="__RequestVerificationToken"]',r).val(),n={order_No:document.getElementById("orderNo").innerText,visit_No:document.getElementById("visitNo").innerText,recipe_Items:t,deleted_items:deletedItems};$.ajax({url:"/Order/SaveRecipe",type:"POST",data:{__RequestVerificationToken:i,data:n},success:function(t){if(1==t.status)Swal.fire("Qeyd Tamamlandı","","success"),window.location.href=t.Url+t.link;else{for(var e="",a=0;a<t.errors.length;a++)e+=t.errors[a]+"<br>";$("#errors").replaceWith('<div id="errors" class="alert alert-danger col-md-12" role="alert">'+e+"</div>"),Swal.fire("Xəta başverdi",""+e,"error"),this.disabled=!1}},error:function(){alert("Error. Please try again.")}})}}}),$("#btnChargesSave").click(function(){var t=$("#__AjaxAntiForgeryForm"),e=($('input[name="__RequestVerificationToken"]',t).val(),$("#formCharges").serialize());$.ajax({url:"/Admin/SaveCharges",type:"POST",dataType:"json",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:e,success:function(t){if(1==t.status)window.location.href=t.Url;else{for(var e="",a=0;a<t.errors.length;a++)e+=t.errors[a]+"<br>";$("#errors").replaceWith('<div id="errors" class="alert alert-danger col-md-12" role="alert">'+e+"</div>"),Swal.fire("Xəta başverdi",""+e,"error"),this.disabled=!1}},error:function(){alert("Error. Please try again.")}})});